%=========================================
% 	   Einleitung     		 =
%=========================================

\chapter{BA Versuch}

\section{Allgemeine Beschreibung des Versuchs}
BA, Basic Access, ist der Standardanschluss an das ISDN Netz. Er wird von den Anbietern an Privatkunden und kleine Betriebe vergeben. Basic Access bietet zwei Nutzkanäle (B-Kanäle) und einen Signalisierungskanal (D-Kanal). Obwohl die Netzbetreiber nach und nach auf reine IP Netze umstellen, hat ISDN in öffentlichen Telefonnetzen einen hohen Stellenwert. Mit der Entscheidung, dass die Ortsvermittlungsanlagen digitalisiert werden sollte, wurde 1979 ein wichtiger Grundstein für ISDN gelegt. 1987 wurde ISDN in Pilotprojekten erfolgreich getestet und schließlich 1989 flächendeckend eingeführt. ISDN bietet im Vergleich zu den analogen Übertragungstechniken den Vorteil, dass zwei Nutzkanäle gleichzeitig übertragen werden können. Zusätzliche Vorteile resultieren aus der verbesserten Sprachqualität und der schnelleren Datenübertragung.

Der folgende Versuch soll das grundlegende Verständnis für ISDN vertiefen und gleichzeitig Einblicke in die Konfiguration gewähren. Der Einblick in die Konfiguration wird dadurch vermittelt, dass es zu dem Versuch gehört, die Anlage für den Versuch herzurichten. Durch Protokollmitschnitte und die bereitgestellten Unterlagen soll das grundlegende Verständnis für ISDN vermittelt werden.

\section{Einrichten der Anlage}

\subsection{Einrichten der Ports \label{einrichtungPorts}}
\subsubsection{Aufbau des Versuchs}

Als Switch steht ein Patapsco Liberator S zur Verfügung. Der Switch übernimmt die Funktionen des Netzes. Dazu gehören die TEI Vergabe, das Routing von Gesprächen und die Vergabe von Telefonnummern. Auf der Hardwareebene verbindet der Liberator die Telefone.

Zusätzlich steht ein EyeSDN Gerät. Dieses ermöglicht die Verbindung des Computers mit dem ISDN Netz und damit den Mittschnitt der Daten. 

Zur Telefonie stehen zwei Telefone zur Verfügung und zum Konfigurieren des Systems ein Computer.
\todo{War da nicht noch was zur Stromversorgung?}

\subsubsection{Versuchsdurchführung}
Die Hardware ist zu Beginn des Versuchs bereits verkabelt. Nachdem die SoftwareEyeSDN gestartet wurde, beginnt das Konfigurieren des Switches. Die Konfiguration des Switches geschieht in der Anwendung Switchmanager. Dort werden die Ports eingerichtet, an denen die Telefone hängen und die Freizeichen eingestellt. Nach dem Upload wird die Konfiguration auf den Switch übertragen.

Die Einstellungen können direkt an den Telefonen getestet werden. Wenn der Hörer abgehoben wird, muss ein Freizeichen zu hören sein.


\subsubsection{}
\begin{figure}[htbp]
\includegraphics[width=0.7\textwidth]{tkinhalt/ba_bilder/liberator.png}
\caption{Der Loberator S \cite{liberatorBild}}
\label{darstellungLiberator}
\end{figure} 

\subsubsection{Auswertung des Versuchs}
Nachdem die Ports konfiguriert sind, und die Konfiguration auf den Liberator S übertragen sind, sind die Telefone grundsätzlich aktiv. Beide Telefone geben nach dem Abheben des Hörers ein Freizeichen. 

\subsection{Einrichten der Routing Tabellen}
Nach dem Versuch \ref{einrichtungPorts} haben die Telefone bereits Grundfunktionalitäten. Zum Telefonieren und für die weiteren Versuche fehlt aber noch die Einrichtung der Routinginformationen. Ohne die Routinginformationen ist es nicht möglich, ein Gespräch von einem Telefon zum Anderen zu leiten, als zu telefonieren.

\subsubsection{Aufbau des Versuchs}
Der Aufbau des Versuchs entspricht dem vom Versuch \ref{einrichtungPorts}. Dieser ist für den aktuellen Versuch aber eine Vorraussetzung.

\subsubsection{Beschreibung des Versuchs}
Das Routing wird im Interface Term des Liberator Fensters eingerichtet. Für das Einrichten von  Routen können Profile angelegt werden, dadurch bleibt das System flexibler. Wir richten ein neues Profil ein, und konfigurieren die Routen von Telefon 1 zu Telefon 2  und umgekehrt. Wie bereits im letzten Versuch werden die Einstellungen nach dem Hochladen wirksam.

\subsubsection{Auswertung des Versuchs}
Nachdem die Routen konfiguriert sind, ist es möglich das Telefon 2 vom Telefon 1 an anzurufen. Bzw. ein Anruf in die Umgekehrte Richtung ist auch möglich.

\section{Aufzeichnungen und Interpretationen des ISDN-D-Kanal Protokolls}
\subsection{Aufzeichnen des  ISDN-D-Kanal Protokolls \ref{aufzeichnenDKanal}}
\subsubsection{Versuchsaufbau}
Der Versuchsaufbau entspricht dem Versuch  \ref{einrichtungPorts}. Die beiden vorangegangen Versuche sind für diesen voraus gesetzt.

\subsubsection{Versuchdurchführung}
Die spätere Auswertung wird erleichtert, wenn der, eventuell schon laufende, Mitschnittsdienst erst gestoppt wird und alle vorhandenen Ergebnisse verworfen werden. Nachdem das geschehen ist, wird der Mitschnittdienst wieder gestartet und das Telefon 1 vom Telefon 2 angerufen. Wenn das Telefon 2 klingelt wird der Hörer abgehoben und nach einem kurzen Moment wieder aufgelegt. Dadurch wird ein Gespräch aufgebaut und wieder abgebaut. Direkt nach dem Beenden des Gesprächs wird der Mitschnittdienst wieder gestoppt. 
Die Auswertung des Gesprächs beginnt, wenn der Mitschnitt im Fenster mit einem Doppelklick ausgewählt wird. 

\subsection{Interpretieren des D-Kanal-Protokoll Mitschnitts}
\subsubsection{Versuchsaufbau}
Der Versuch \ref{aufzeichnenDKanal} muss durchgeführt sein und die Ergebnisse müssen vorliegen. Für die Auswertung muss ein Computer mit der Software Wireshark bereit stehen.
\subsubsection{Versuchsdurchführung}
Die aufgezeichneten Protokolldaten werden mit Wireshark geöffnet. 

\subsubsection{Auswertung des Versuchs}
\todo{Verbindungsaufbau skizzieren}
Zur einfacheren und genaueren Auswertung des Versuchs sind in der Aufgabenbeschreibung 12 Fragen beschrieben. 
\begin{enumerate} 
	\item \textbf{Welche Rahmen dienen der TEI-Vergabe, und welcher TEI-Wert wird dem Telefon von der Vermittlung zugewiesen?} \newline
		Die Tei vergabe wird über das Protocol TEI mit der info Itenty Request behandelt. Diese fordert einen TEi Wert zur indentifizierung des Endgerätes an. 
		
		\includegraphics[width=0.8\textwidth]{tkinhalt/ba_bilder/ba/indenty_request_a1.png}
		
		Die Anfrage wird durch einen Identy Assigned bestätigt und ein TEI Wert wird dem Endgerät zugewiesen. In diesem Fall wird der Wert 64 zugewiesen.
		
		\includegraphics[width=0.8\textwidth]{tkinhalt/ba_bilder/ba/identy_assigned_a1.png}

	\item \textbf{Wann ist der Aufbau der Schicht 2 abgeschlossen?}  \newline
	Der Aufbau ist nach dem senden eines unnumbered Acknowledge Frame der zur Bestätigung des Set Asynchronous Balance Mode Extended Frame benutzt wird beendet.
		\includegraphics[width=0.8\textwidth]{tkinhalt/ba_bilder/ba/sabme_a2.png}
	
	\item \textbf{Welchen ISDN-Dienst fordert das Telefon von der Vermittlungsstelle an, welche Übertragungskapazität benötigt dieser Dienst?}\newline
	Das Telefon fordert den Dienst zum übertragen von Sprache an. Dies ist ein Kanal mit 64 kbit/s übertragungskapazität.
	Im folgenden Frame kann man dies herauslesen. Es handelt sich hierbei um eine Setup Nachricht.
		\includegraphics[width=0.8\textwidth]{tkinhalt/ba_bilder/ba/setup_a3.png}
	
	
	\item \textbf{Welche Kodierung des Sprachkanals wird gewählt?}\newline
	ITU-T standardized coding hab ich hier aufm block stehen.
	\item \textbf{Welche MSN-Nummer wird in welchem Rahmen übertragen?}\newline
	\item \textbf{Wann ist der gesicherte Aufbau der Schicht 3 abgeschlossen?}\newline
	\item \textbf{Welchen B-Kanal weist die Vermittlung der Verbindung zu?}\newline
	B1 Channel (0x01)
	\item \textbf{Wo wird die gerufene Telefonnummer übermittelt?}\newline
	\item \textbf{Mit welchem Rahmen bestätigt die Vermittlung die Vollständigkeit der Rufnummer und beginn den angeforderten Teilnehmer anzuwählen?}\newline
	Alerting
	\item \textbf{Mit welchem Rahmen signalisiert die Vermittlung, dass der gerufene Teilnehmeranschluss ein Endgerät besitzt, das den Sprachdienst erfüllen kann und ein Rufsignal aussendet?}\newline
	
	\item \textbf{Wann sind die Schichten 3 und 2 jeweils wieder vollständig abgebaut?}\newline
	\item \textbf{Bei ISDN gibt es die Möglichkeit, bei einem abgehenden Ruf die Zielrufnummer vor oder nach dem Abheben des Hörers einzugeben. Wodurch unterscheidet sich die Signalisierung auf Schicht 3 (SETUP- und INFO Nachricht) der Teilnehmerschnittstelle in diesen beiden Fällen?}\newline
\end{enumerate}

Nur dass das TODO die Tabelle nicht kaputt macht\todo{Haben wir den Versuch mit dem aufgelegten Hörer gemacht?}

\begin{table}
\begin{tabular}{|p{0.20 \linewidth}||*{9}{p{0.07 \linewidth}|}}
\hline
Nachricht / Nachrichtenelement & Alert & Call Proc & Conn & DISC & Info & Rel & Rel. Comp & Setup & Setup Ack\\
\hline
\hline
Bearer Capability & & & & & & & & &    \\ 
\hline
Cause & & & & & & & & &  \\
\hline
Channel Identification  & & & & & & & & &  \\
\hline
Process Indicator  & & & & & & & & &  \\
\hline
Display  & & & & & & & & &  \\
\hline
Date / Time  & & & & & & & & &  \\
\hline
Calling Party Number  & & & & & & & & & \\
\hline
Called Party Number   & & & & & & & & & \\
\hline
Sending Complete  & & & & & & & & & \\
\hline
Facility  & & & & & & & & & \\
\hline
User to User Information  & & & & & & & & & \\
\hline
\end{tabular}
\caption{Genutzte Nachrichten}
\end{table}
