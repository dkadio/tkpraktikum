%=========================================
% 	   Einleitung     		 =
%=========================================

\chapter{RSP Versuch}
\section{Einleitung}
Router und Switche begleiten uns im täglichen Leben. Auch wenn sie oft nicht wahrgenommen werden, sind sie doch allgegenwärtig. Ob mobiles Surfen, das Surfen am Computer oder auch telefonieren, diese Tätigkeiten sind ohne Router und Switche nicht möglich. Der Netzwerkausrüster Cisco Systems rechnet bis zu Jahr 2018 mit einem weltweiten Internettraffic von 1,6 Zettabyte \cite{cisco_traffic_schaetzung}. Die Netzwerke, die diesen Traffic behandeln und abwickeln sollen wachsen stetig mit ihren Aufgaben. Deswegen ist eine fundierte Ausbildung in der Netzwerktechnik und ein Verständnis der Komponenten für den Informatiker der Zukunft unausweichlich. \todo{Kann man das so schreiben?}

Der folgende Versuch soll einen grundlegenden Einblick in den Aufbau eines Netzwerkes und die Konfiguration der Komponenten vermitteln.

\subsection{Benötigte Hardware für den Versuch}
Für den Versuch werden ein Cisco 2811 Router und ein Cisco 2960 Switch benötigt. Zusätzlich werden ein Windows Computer mit einem Terminal Emulationsprogramm und diverse Kabel benötigt.

\subsubsection{Router}
Die Aufgabe eines Routers, manchmal auch als Layer 3 Switch bezeichnet, ist es, zwischen mehreren Netzwerken der ISO/OSI Referenzmodells Schicht 3 zu vermitteln. Dazu besitzt ein Router mehrere (virtuelle) Ports, an denen die entsprechenden Netzwerke angeschlossen sind. Der Router, der für unseren Versuch zur Verfügung stand ist vom Netzwerkausrüster Cisco Systems und ist aus der Modellreihe 2811.

\begin{figure}[htbp] 
  \centering
     \includegraphics[width=0.6\textwidth]{tkinhalt/rsp_bilder/router.jpg}
  \caption{Ein Cisco 2800 Router \cite{cisco_2800_router}}
  \label{fig:router}
\end{figure}

\subsubsection{Switch}
Die Aufgabe eines Switches ist es, Netzwerksegmente miteinander zu verbinden. Das bedeutet, dass mehrere Kabel physikalisch miteinander verbunden werden können und die Datenpakete von einem Kabel in ein anderes weitergeleitet werden können. Logisch gesehen, werden die Datenpakete nur an die Kabel oder Ports weitergeleitet, die die Empfängeradresse dieses Pakets haben. Im Versuch stand uns ein Switch aus der Serie 2960 vom Netzwerkausrüster Cisco Systems zur Verfügung.

 \begin{figure}[htbp] 
  \centering
     \includegraphics[width=0.6\textwidth]{tkinhalt/rsp_bilder/switch.jpg}
  \caption{Ein Cisco 2800 Router \cite{cisco_2960_switch}}
  \label{fig:switch}
\end{figure}

\subsubsection{Kabel \label{kabel}}
Bei den Kabeln gibt es verschiedene Typen. Bei den Kabeln zur Energieversorgung der Geräte handelt es sich um normale Kaltgerätekabel, diese brauchen an dieser Stelle nicht weiter beschrieben zu werden. Weiterhin waren RJ 45 Twisted Pair Kabel verwendet. Diese dienen der Verbindung zwischen den Routen, bzw, Switchen und den Computern. \todo{War da auch ein Crossover Kabel dabei?} Diese Verbindung dient dem Austausch von Nutzdaten. Die Konfiguration wurde über eine serielle Schnittstelle vorgenommen. Das dazugehörige Kabel hat auf der einen Seite einen female COM Port, auf der anderen Seite einen male RJ 45 Stecker. 

\subsubsection{Hintergrund der seriellen Übertragung}
Im Abschnitt \ref{kabel} wurde erwähnt, dass für die Konfiguration die serielle Schnittstelle genutzt wird. Dabei stellt sich die Frage, warum dieser Aufwand betrieben werden muss, obwohl ein Switch doch mit ausreichend Ethernet Ports ausgestattet sein sollte. Den Hintergrund möchten wir an dieser Stelle durch ein Beispiel beleuchten:
\begin{enumerate}
	\item Switch und Computer befinden sich im Netzwerk 192.168.0.0/16
	\item Der Administrator will das Netzwerk in das Netzwerk 172.16.0.0/12 umbenennen
	\item Der Administrator vertippt sich bei der Vergabe der Ip und gibt die Netzwerkadresse 172.36.0.0 ein
\end{enumerate}

Was wird nun passieren? Wir setzen voraus, dass im Netzwerk kein DHCP Server aktiviert ist und alle Ip Adressen statisch vergeben werden. Im ersten Schritt ist die Welt noch in Ordnung. Im zweiten Schritt ändert der Administrator die NW Adressen seines Computers und die des Routers. Im dritten Schritt bricht das Chaos aus. Mit dem Abspeichern der ersten Adresse, sei es Computer oder Switch, verliert der Administrator die Kontrolle über den Switch. Da sich mit einer geänderten Adresse der Switch und der Computer in verschieden Netzwerken befinden, ist dieser \glqq Fehler\grqq \~ vorhersehbar und leicht nachzuvollziehen. Der Administrator berücksichtigt diese Tatsache und speichert zuerst die Konfiguration des Switches. Nachdem er die Verbindung zum Switch verloren hat speichert er die neue Konfiguration im Computer. Obwohl sich Computer und Switch vermeintlich wieder in den gleichen Netzen befinden, hat er keinen Zugriff mehr auf den Switch.

Ohne einen logischen Zugriff auf den Switch gestaltet sich die Suche nach dem Fehler sehr schwierig. Diese Problematik kann durch die Konfiguration über die serielle Schnittstelle vermieden werden. Ein weiterer Vorteil ist, dass die Konfigurationsschnittstelle des Switches vom Rest des Netzwerkes getrennt ist. Dadurch kann alleine schon durch die Trennung ein Angriff auf den Switch erschwert werden.
\section{Einrichtung des Systems}
Die physische Einrichtung des Systems ist in der Aufgabenstellung genau beschrieben. So viel sei zu sagen, jeder der beiden Computer ist per LAN Schnittstelle mit dem Switch verbunden. Je ein Computer ist über den COM Port (seriell) mit Router und Switch verbunden. Router und Switch sind über Gigabit Ethernet miteinander verbunden.

Die logische Einrichtung des Systems geschieht über Hyper Terminal. Hyperterminal ist eine Terminal Emulationssoftware. Diese ermöglicht eine Verbindung zu anderen Computern oder Großrechnern über die serielle Schnittstelle. Diese Verbindung ist rein ASCII textbasiert. 

\subsection{Einrichtung des Switchs}
Die Einrichtung des Switches beginnt mit dem Hochfahren des Geräts. Dabei kann im Hyperterminal überwacht werden, ob der Switch ordnungsgemäß startet. Nachdem die Selbstdiagnose durchgelaufen ist, kann in den Auführungsmodus, bzw. in den \glqq  privileged EXEC mode\grqq \~gewechselt werden.

Die unterschiedlichen Kommando Modi sind in Tabelle \ref{ciscoCommandMode} aufgeführt.  

\begin{table}
\begin{tabular}{|p{0.15 \linewidth} | p{0.3 \linewidth} | p{.15\linewidth} | p{0.3 \linewidth} |}
\hline
Command Mode  & Access Method & Prompt & Exit \\
\hline
\hline
User EXEC & This is the first level of access. Change terminal settings, perform basic tasks, and list system information. & \textit{ap>} & Enter the logout command.    \\ 
\hline
Privileged EXEC & From user EXEC mode, enter the enable command. & \textit{ap\#} & To exit to user EXEC mode, enter the disable command. \\
\hline
Global configuration  & From privileged EXEC mode, enter the configure command. & \textit{ap(config)\#} & To exit to privileged EXEC mode, enter the exit or end command, or press Ctrl-Z.  \\
\hline
Interface configuration  & From global configuration mode, specify terminal then specify an interface by entering the interface command followed by the interface type and number. & \textit{ap(config-if)\#} & To exit to privileged EXEC mode, enter the end command, or press Ctrl-Z. To exit to global configuration mode, enter the exit command.  \\
\hline
\end{tabular}
\caption{Genutzte Nachrichten}
\label{ciscoCommandMode}
\end{table}

Im privileged EXEC mode müssen erst die Einstellungen des Switches zurück gesetzt werden. Dadurch wird vermieden, dass bereits bestehende Konfigurationen die Ergebnisse beeinflussen. Die Ausgabe ist ähnlich der Ausgabe \ref{routerZurueckSetzen}.
Nachdem die Konfiguration des Switches zurück gesetzt wurde, kommt die Aufforderung, den Switch zu konfigurieren. Diese Aufforderung wird mit einem \textit{n} quittiert. Dadurch wird die Konfiguration nicht durchgeführt und der Switch läuft mit seinen Default Konfigurationen. Der Switch ist jetzt bereit für den weiteren Versuch.


\subsection{Einrichtung des Routers}

Das Zurücksetzen des Routers geschieht analog zu dem Zurücksetzen des Switches.

\begin{lstlisting}[captionpos=b, caption="Die Ausgabe des Zurücksetzens", label=routerZurueckSetzen]
	Router#erase startup-config
Erasing the nvram filesystem will remove all configuration files! Continue? [confirm]
[OK]
Erase of nvram: complete
Router#
*Jun  4 10:44:29.415: %SYS-7-NV_BLOCK_INIT: Initialized the geometry of nvram
Router#re
*Jun  4 10:45:30.887: %LINK-3-UPDOWN: Interface Serial0/0/0, changed state to do
wn
*Jun  4 10:45:31.887: %LINEPROTO-5-UPDOWN: Line protocol on Interface Serial0/0/
0, changed state to do
Router#reload
Proceed with reload? [confirm]

*Jun  4 10:45:44.707: %SYS-5-RELOAD: Reload requested  by console. Reload Reason
: Reload Command.

System Bootstrap, Version 12.4(13r)T11, RELEASE SOFTWARE (fc1)
Technical Support: http://www.cisco.com/techsupport
Copyright (c) 2009 by cisco Systems, Inc.

Initializing memory for ECC
.
c2811 platform with 262144 Kbytes of main memory
Main memory is configured to 64 bit mode with ECC enabled


Upgrade ROMMON initialized
program load complete, entry point: 0x8000f000, size: 0xcb80
program load complete, entry point: 0x8000f000, size: 0xcb80

program load complete, entry point: 0x8000f000, size: 0x1859ee4
Self decompressing the image : #################################################
###########################################
#####################################
########### [OK]

Smart Init is enabled
smart init is sizing iomem
  ID            MEMORY_REQ                 TYPE
0003E7          0X00473800 C2811 Mainboard
                0X000021B8 Onboard USB
                0X002C29F0 public buffer pools
                0X00211000 public particle pools
TOTAL:          0X009493A8

If any of the above Memory Requirements are
"UNKNOWN", you may be using an unsupported
configuration or there is a software problem and
system operation may be compromised.
Rounded IOMEM up to: 10Mb.
Using 3 percent iomem. [10Mb/256Mb]

              Restricted Rights Legend

Use, duplication, or disclosure by the Government is
subject to restrictions as set forth in subparagraph
(c) of the Commercial Computer Software - Restricted
Rights clause at FAR sec. 52.227-19 and subparagraph
(c) (1) (ii) of the Rights in Technical Data and Computer
Software clause at DFARS sec. 252.227-7013.

           cisco Systems, Inc.
           170 West Tasman Drive
           San Jose, California 95134-1706



Cisco IOS Software, 2800 Software (C2800NM-IPBASE-M), Version 12.4(15)T7, RELEAS
E SOFTWARE (fc3)
Technical Support: http://www.cisco.com/techsupport
Copyright (c) 1986-2008 by Cisco Systems, Inc.
Compiled Wed 13-Aug-08 17:09 by prod_rel_team
Image text-base: 0x400AA288, data-base: 0x419C4610

Cisco 2811 (revision 49.46) with 251904K/10240K bytes of memory.
Processor board ID FCZ131871SX
2 FastEthernet interfaces
2 Low-speed serial(sync/async) interfaces
DRAM configuration is 64 bits wide with parity enabled.
239K bytes of non-volatile configuration memory.
62720K bytes of ATA CompactFlash (Read/Write)


         --- System Configuration Dialog ---
         
\end{lstlisting}

Nachdem der Router auf die Grundeinstellungen zurück gesetzt wurde, muss er neu konfiguriert werden. Der folgende Dialog startet die Konfiguration: 

\begin{lstlisting}[captionpos=b, caption="Die Aufforderung zum neukonfigurieren des Routers", label=routerNeuKonfigurieren]
Would you like to enter the initial configuration dialog? [yes/no]: yes

At any point you may enter a question mark '?' for help.
Use ctrl-c to abort configuration dialog at any prompt.
Default settings are in square brackets '[]'.

Basic management setup configures only enough connectivity
for management of the system, extended setup will ask you
to configure each interface on the system

Would you like to enter basic management setup? [yes/no]: yes
Configuring global parameters:
\end{lstlisting}

Die Konfiguration wird nach den Vorgaben der Versuchsbeschreibung durchgeführt. Nach der Konfiguration wird erneut das Kommando \textit{show running-config} aufgerufen.

