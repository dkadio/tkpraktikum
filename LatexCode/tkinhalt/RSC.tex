%=========================================
% 	   Einleitung     		 =
%=========================================

\chapter{RSC Versuch \label{rscVersuch}}
\section{Einleitung}
Im Versuch \ref{rspVersuch} haben wir die grundsätzliche Funktionsweise der Cisco Prompt kennen gelernt. In diesem Versuch wurde der Hostname konfiguriert und über Packet Tracer ein Netzwerk aufgebaut. 

Da die Konfiguration im letzten Versuch noch nicht einmal die Oberfläche der Möglichkeiten angekratzt hat, möchten wir in diesem Versuch tiefer in die Konfiguration von Cisco Geräten einsteigen.

\section{Aufbau des Versuchs}
\subsection{Benötigte Geräte}
\begin{itemize}
	\item Zwei Router
	\item Ein Switch
	\item Zwei PC mit Hyper Terminal
	\item Zwei Patchabel
	\item Ein Crossover Kabel
	\item Ein Serielles Kabel mit je einem DCE und einem DTE Anschluss
\end{itemize}

Der erste PC wird über ein serielles Kabel und über ein Patchkabel mit einem Switch verbunden. Der Zweite PC wird mit einem seriellen Kabel und einem Crossover Kabel mit dem Router 2 verbunden. Die seriellen Kabel dienen der Konfiguration der Geräte. Das Patchkabel und das Crossoverkabel sind für den Transport von Payload. Der Switch wird mit einem Patchkabel mit dem Router verbunden.

Die Router werden untereinander mit dem seriellen Kabel verbunden. Zu beachten ist hierbei, dass der Bustakt vom DCE (female) Port kommt. Der DTE (male) Port benötigt diesen Bustakt, damit eine Kommunikation möglich ist. 

Die Router bekommen für ihre einzelnen Ports unterschiedliche IP Adressen:

\begin{table}
\begin{tabular}{|*{5}{c|}}
\hline
Device & Hostname & Interface & IP-Address & Subnet Mask \\
\hline
\hline
R1 & R1 & Serial 0/0/0 (DCE) &  172.17.0.1 &  255.255.0.0 \\ 
\hline
 &  & FE0/1 u. FE0/0 & 172.16.0.1 & 255.255.0.0  \\
\hline
R2 &  R2 & Serial 0/0/0 (DTE) &  172.17.0.2 & 255.255.0.0 \\
\hline
 & &  FE0/0 & 172.18.0.1 &  255.255.0.0\\
\hline
\end{tabular}
\caption{Adresstabelle des Netzwerks}
\label{adresstabelle}
\end{table}

Nachdem die Geräte verkabelt und gestartet sind, müssen noch die NVRAM der Geräte gelöscht werden. Dadurch kann sichergestellt werden, dass keine alten Konfigurationen mehr gespeichert sind. Diese könnten sonst im Laufe des Versuchs Fehler produzieren. Eine Ausgabe der Geräte wurde bereits im Versuch \ref{rspVersuch} dargestellt.

Bevor eine Kommunikation stattfinden kann, müssen erst noch die Hosts konfiguriert werden. Da im Netz kein DHCP Server läuft, müssen die Netzwerkeinstellungen der Hosts manuell vergeben werden.

\begin{table}
\begin{tabular}{|*{5}{c|}}
\hline
Device & IP-Address & Subnet Mask & Default Gateway \\
\hline
\hline
H1 & ???? & 255.255.0.0 & 172.17.0.1 \\ 
\hline
 H2 & ??? & 255.255.0.0 & 172.18.0.1  \\
\hline
\end{tabular}
\caption{Einstellungen der Hosts}
\label{hostEinstellungen}
\end{table}

\section{Versuch - Teil 1}
Im folgenden wird nicht mehr beschrieben, dass zum Ändern von Konfigurationen in einen Konfigurationsmodus, wie beispielsweise den \glqq Global configuration\grqq~Modus gewechselt werden muss.
\subsection{Konfigurieren der Router Basiseinstellungen}
Der erste Schritt der Konfiguration ist das konfigurieren der Hostnamen. Diese können mit dem Befehl \textit{hostname <Name>} konfiguriert werden. Der Router 1 bekommt den Hostname R1, der Router 2 den Hostname R2.

Nach dem Konfigurieren folgt das Setzen der Passwörter. Typische Zugriffspunkte für ein Cisco Gerät sind die Terminal Leitungen (auch Virtual Terminal Lines oder VTYs genannt), der Konsolen Port sowie der Hilfs Port (AUX). Die Terminal Leitungen sind über telnet oder ssh erreichbar und haben den Vorteil, dass kein Serielles Kabel benötigt wird. Die Nachteile einer solchen Konfiguration wurden im Versuch \ref{rspVersuch} erläutert. Die Zugänge müssen separat konfiguriert werden. 
Das Passwort des Konsolen Ports wird mit folgender Sequenz gesetzt:
\begin{lstlisting}[captionpos=b, caption=Die Eingabe zum Setzen des Konsolen Port Passworts, label=konsolenPasswortSetzen]
R1(config)#line console 0 
R1(config-line)#password cisco 
R1(config-line)#login 
R1(config-line)#exit
\end{lstlisting}
Nach dieser Sequenz wird für die Konfiguration über die Konsole ein Passwort benötigt. Dieses ist in dem Fall cisco. Der Router kann aber trotzdem ohne Passwort über eine Terminal Leitung konfiguriert werden. Um hierfür ein Passwort zu setzen ist folgende Sequenz nötig.
\begin{lstlisting}[captionpos=b, caption=Die Eingabe zum Setzen des Terminal Passworts, label=terminalPasswortSetzen]
R1(config)#line vty 0 4 
R1(config-line)#password cisco 
R1(config-line)#login 
R1(config-line)#exit
\end{lstlisting}
Nach dieser Sequenz wird auch für das Konfigurieren über eine Terminal Leitung ein Passwort benötigt. 

In IOS werden die Passwörter per default im Klartext gespeichert. Daraus ergibt sich ein Sicherheitsrisiko. Die Passwörter können von jedem, der Zugang zum Router hat, im Klartext ausgelesen werden. Aktuell sind auch nur die Zugänge passwortgeschützt. Sobald man eine Verbindung (VTY oder Konsole) zum Router hat, ist man automatisch berechtigt, den Router zu konfigurieren. Mit dem Befehl \textit{enable passwort <Passwort>} wird sichergestellt, dass man auch ein Passwort braucht, wenn man in einen der Konfigurationsmodi will. Mit dem Befehl \textit{enable secret <Passwort>} wird das Passwort verschlüsselt gespeichert.

\begin{lstlisting}[captionpos=b, caption=Die Eingabe zum Aktivieren und Verschlüsseln des Passworts, label=terminalPasswortSetzen]
R1(config)#enable password cisco 
R1(config)#enable secret class 
R1(config)#exit
\end{lstlisting}

Nach dieser Befehlssequenz ist ein Passwort zum Wechsel in den Konfigurationsmodus gesetzt, dieses ist auch verschlüsselt gespeichert. 

Da jetzt Passwörter gesetzt sind macht es Sinn, dass Benutzer aufgefordert werden, diese einzugeben. Diese Aufforderung kann mit dem Befehl \textit{banner motd <delimiter> message <delimiter>} konfiguriert werden. Die delimiter zeigen den Start und das Ende der Nachricht an. Sie dürfen nicht in der Nachricht genutzt werden und die Zeichen "'  und  \% dürfen nicht genutzt werden. Ein Blank wird nicht funktionieren.
\begin{lstlisting}[captionpos=b, caption=Setzen der Passwort Aufforderung, label=passWortAufforderung]
R1(config)#banner motd #Unauthorized Use Prohibited#
\end{lstlisting}

Router mit IOS sind standardmässig so konfiguriert, dass sie versuchen, jedes Wort, das sie nicht kennen, in einem DNS Server mit der Broadcastadresse 255.255.255.255 aufzulösen.
Eine Folge ist, dass bei einer falschen Befehlseingabe sehr lange Wartezeiten und eine unnötige Netzwerklast auftreten, weil der Router versucht die Zeichenfolge in eine IP Adresse aufzulösen. Durch
\begin{lstlisting}[captionpos=b, caption=Deaktivieren des DNS im Terminal, label=dnsDeaktivieren]
R1(config)#no ip domain lookup
\end{lstlisting}
wird dieses Verhalten abgestellt.

Der letzte Schritt der Basiseinstellung verhindert, dass Fehlermeldungen die aktuelle Eingabe in die Prompt unterbrechen.
\begin{lstlisting}
R1(config)#line console 0 
R1(config-line)#logging synchronous
\end{lstlisting}

Ob die Einstellungen korrekt waren, kann mit dem \textit{show running-config} Befehl überprüft werden.
\begin{lstlisting}[captionpos=b, caption=Ausgabe der Config nach dem Konfigurieren der Basiseinstellungen, label=nachBasiseinstellungen]
R1#show running-config
Building configuration...

Current configuration : 931 bytes
!
version 12.4
service timestamps debug datetime msec
service timestamps log datetime msec
no service password-encryption
!
hostname R1
!
boot-start-marker
boot-end-marker
!
enable secret 5 $1$HQCF$50Cteo3yxGrpQwwSNdUIz.
enable password cisco
!
no aaa new-model
!
!
ip cef
!
!
no ip domain lookup
multilink bundle-name authenticated
!
!
!
archive
 log config
  hidekeys
!
!
!
!
!
interface FastEthernet0/0
 no ip address
 shutdown
 duplex auto
 speed auto
!
interface FastEthernet0/1
 no ip address
 shutdown
 duplex auto
 speed auto
!
interface Serial0/0/0
 ip address 172.17.0.1 255.255.0.0
 no fair-queue
 clock rate 125000
!
interface Serial0/0/1
 no ip address
 shutdown
 clock rate 125000
!
ip forward-protocol nd
!
!
ip http server
!
!
!
control-plane
!
banner motd #Unauthorized Use Prohibited#
!
line con 0
 password cisco
 logging synchronous
 login
line aux 0
line vty 0 4
 password cisco
 login
!
scheduler allocate 20000 1000
!
end
\end{lstlisting}

An den Zeilen
\begin{lstlisting}
hostname R1
\end{lstlisting}

\begin{lstlisting}
enable secret 5 $1$HQCF$50Cteo3yxGrpQwwSNdUIz.
enable password cisco
\end{lstlisting}

\begin{lstlisting}
no ip domain lookup
\end{lstlisting}
\begin{lstlisting}
banner motd #Unauthorized Use Prohibited#
\end{lstlisting}
\begin{lstlisting}
line con 0
password cisco
logging synchronous
login
\end{lstlisting}

\begin{lstlisting}
line aux 0
\end{lstlisting}

\begin{lstlisting}
line vty 0 4
password cisco
login
\end{lstlisting}

kann man erkennen, dass das Konfigurieren erfolgreich war. Und dass der Router weiterhin ohne Passwort über den Hilfs Port (AUX) erreicht werden kann. Eine Konfiguration wird aber über diesen Port nicht möglich sein.

Auffällig ist auch, dass sowohl das verschlüsselte, als auch das unverschlüsselte Passwort in der Ausgabe stehen. Diese Tasche wirft Fragen auf. Welches Passwort ist nun gültig? Und warum kann man überhaupt ein unverschlüsseltes Passwort eingeben? Die Antwort auf diese Fragen bringt die Homepage des Herstellers. Die erste Frage ist leicht beantwortet, das verschlüsselte Passwort wird bevorzugt, das heißt, dass man sich nur mit diesem anmelden kann. Die zweite Frage hat einen geschichtlichen Hintergrund. Wenn man eine alte Version von IOS bootet, oder veraltete boot ROM nutzt, kann es Probleme mit verschlüsselten Passwörtern geben. In diesem Fall sind unverschlüsselte Passwörter zu nutzen.

Um die Fragen der Versuchsbeschreibung zu beantworten:
\begin{itemize}
	\item \textbf{s there an encrypted password?} Yes, the password to enter the config mode ist encrypted. The passphrase \glqq class\grqq~ became \glqq 5 \$1\$HQCF\$50Cteo3yxGrpQwwSNdUIz.\grqq . According to the cisco homepage ist the \glqq 5\grqq an indicator for an encrypted password.
	\item \textbf{Are there any other passwords?} Yes, there are the passwords for the configuration ports. And the decrypted password \glqq cisco\grqq.
	\item \textbf{Are any of the other passwords encrypted?} No, the other passwords are not encrypted. If you want to encrypt all of the passwords, you have to enter the command \textit{service password-encryption}. If this service ist activated, all of the passwords will become encrypted.
\end{itemize}

\subsection{Konfigurieren der seriellen Interfaces}
Nachdem der Router für die Benutzung konfiguriert wurde und grundlegende Sicherheitsmaßnahmen ergriffen wurden, muss nun der Betrieb ermöglicht werden. Damit die Hosts mit den Routern und die Router untereinander kommunizieren können, müssen die Interfaces konfiguriert werden. Die Befehle
\begin{lstlisting}[captionpos=b, caption=Konfigurieren des seriellen Interface, label=configSerialInterface]
R1(config)#interface serial 0/0/0 
R1(config-if)#description WAN link to R2 
R1(config-if)#ip address 172.17.0.1 255.255.0.0 
R1(config-if)#clock rate 64000
R1(config-if)#no shutdown 
R1(config-if)#exit 
R1(config)#exit
\end{lstlisting}
konfigurieren das serielle Interface. 

Die ersten 3 Zeilen sind leicht verständlich. Dort wird bestimmt, welches Interface mit welcher IP und welchem Kommentar konfiguriert werden soll.\todo{was zum Teufel ist die Clockrate?}

Der Befehl \textit{no shutdown} aktiviert das Interface.

Nachdem diese Befehlssequenz eingegeben wurde, kann man sich mit dem Befehl \textit{show interfaces serial 0/0/0} anzeigen lassen, ob die Konfiguration erfolgreich war:
\begin{lstlisting}[captionpos=b, caption=Konfiguration des seriellen Interface, label=configSerialInterfaceNach]
R1#show interfaces serial 0/0/0
Serial0/0/0 is up, line protocol is up
Hardware is GT96K Serial
Description: WAN link to R2
Internet address is 172.17.0.1/16
MTU 1500 bytes, BW 128 Kbit/sec, DLY 20000 usec,
reliability 255/255, txload 1/255, rxload 1/255
Encapsulation HDLC, loopback not set
Keepalive set (10 sec)
Last input 00:00:04, output 00:00:07, output hang never
Last clearing of "show interface" counters 00:24:04
Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 0
Queueing strategy: fifo
Output queue: 0/40 (size/max)
5 minute input rate 0 bits/sec, 0 packets/sec
5 minute output rate 0 bits/sec, 0 packets/sec
167 packets input, 11406 bytes, 0 no buffer
Received 161 broadcasts, 0 runts, 0 giants, 0 throttles
0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored, 0 abort
197 packets output, 13012 bytes, 0 underruns
0 output errors, 0 collisions, 4 interface resets
0 output buffer failures, 0 output buffers swapped out
1 carrier transitions
DCD=up  DSR=up  DTR=up  RTS=up  CTS=up
\end{lstlisting}

Um die eigenen Änderungen zu kontrollieren sind die Zeilen
\begin{lstlisting}
Serial0/0/0 is up, line protocol is up
Hardware is GT96K Serial
Description: WAN link to R2
Internet address is 172.17.0.1/16

DCD=up  DSR=up  DTR=up  RTS=up  CTS=up
\end{lstlisting}

Fragen aus der Versuchsanleitung:
\begin{itemize}
	\item \textbf{What did you discover by issuing the show interfaces command?} 
	\begin{itemize}
		\item Serial 0/0/0 status is up
		\item Line protocol up
		\item Internet address is 172.17.0.1/16
		\item Encapsulation HDLC
	\end{itemize}
	\item \textbf{To which OSI layer is the encapsulation referring?} HDLC is a bit-oriented synchronous data link layer protocol. So the encapsulation is referring to OSI Layer 2.
	\item \textbf{If the serial interface was configured, why did the show interfaces serial 0/0/0 indicate that the interface is down?} \todo{Das ist doch konfiguriert. Wat will der von Mir?}
\end{itemize}

Da der Router 2 eine andere Ip Adresse vorgegeben hat, sieht hier die Konfiguration ein wenig anders:
\begin{lstlisting}[captionpos=b, caption=Die Einstellungen für das serielle Interface von R2]
R2(config)#interface serial 0/0/0 
R2(config-if)#description WAN link to R1 
R2(config-if)#ip address 172.17.0.2 255.255.0.0 
R2(config-if)#no shutdown
R2(config-if)#exit 
R2(config)#exit
\end{lstlisting}

Nach dem Konfigurieren werden die Einstellungen überprüft:
\begin{lstlisting}[captionpos=b, caption=show interfaces bei an R2]
Serial0/0/0 is up, line protocol is up
Hardware is GT96K Serial
Description: WAN link to R1
Internet address is 172.17.0.2/16
MTU 1500 bytes, BW 1544 Kbit/sec, DLY 20000 usec,
reliability 255/255, txload 1/255, rxload 1/255
Encapsulation HDLC, loopback not set
Keepalive set (10 sec)
Last input 00:00:02, output 00:00:09, output hang never
Last clearing of "show interface" counters 00:19:00
Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 0
Queueing strategy: fifo
Output queue: 0/40 (size/max)
5 minute input rate 0 bits/sec, 0 packets/sec
5 minute output rate 0 bits/sec, 0 packets/sec
30 packets input, 1462 bytes, 0 no buffer
Received 30 broadcasts, 0 runts, 0 giants, 0 throttles
0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored, 0 abort
19 packets output, 1607 bytes, 0 underruns
0 output errors, 0 collisions, 2 interface resets
3 unknown protocol drops
0 output buffer failures, 0 output buffers swapped out
10 carrier transitions
DCD=up  DSR=up  DTR=up  RTS=up  CTS=up
\end{lstlisting}

Analog zum Router 1 gibt es in der Versuchsbeschreibung auch Fragen zum Router 2:

\begin{itemize}
	\item \textbf{What did you discover by issuing the show interfaces command?}
	\begin{itemize}
		\item Serial 0/0/0 status is up
		\item Line protocol is up
		\item Internet address is 172.17.0.2/16
		\item Encapsulation HDLC
	\end{itemize}
	\item \textbf{To which OSI layer is the encapsulation referring?} See above
	 \item \textbf{Why did the show interfaces serial 0/0/0 indicate that the interface is up?} The interface is physically connected to another device (R1). Additionally is is configured an with the command \textit{no shutdown} enabled. If we started this test with R2, there was no connection, because R2 needs the clock of R1.
\end{itemize}	 
	
Laut den Einstellungen sind die Interfaces konfiguriert und arbeiten. Ob, alles korrekt funktioniert, kann einfach durch einen Ping getestet werden.
\begin{lstlisting}[captionpos=b, caption=Ping von R1 an das serielle Interface von R2]
R1#ping 172.17.0.2

Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 172.17.0.2, timeout is 2 seconds:
!!!!!
Success rate is 100 percent (5/5), round-trip min/avg/max = 28/28/32 ms
\end{lstlisting}

\begin{lstlisting}[captionpos=b, caption=Ping von R2 an das serielle Interface von R1]
R2>ping 172.17.0.1

Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 172.17.0.1, timeout is 2 seconds:
!!!!!
Success rate is 100 percent (5/5), round-trip min/avg/max = 28/28/32 ms
\end{lstlisting}

Beide Ping haben funktioniert, das bedeutet, dass die Interfaces korrekt konfiguriert wurden. Damit ist das Konfigurieren der seriellen Interfaces erfolgreich abgeschlossen.

\subsection{Konfigurieren der Fast Ethernet Interfaces}
Das FE Interface 0/0 wird wird laut der Versuchsbeschreibung konfiguriert. Die folgende Befehlssequenz konfiguriert das Interface.
\begin{lstlisting}[captionpos=b, caption=Die Befehle zum Konfigurieren des FE 0/0 Interface von R1]
R1(config)#interface FastEthernet 0/0 
R1(config-if)#description R1 LAN Default Gateway 
R1(config-if)#ip address 172.16.0.1 255.255.0.0 
R1(config-if)#no shutdown
R1(config-if)#exit
R1(config)#exit
\end{lstlisting}

Die Befehle sind analog der mit denen die seriellen Interfaces konfiguriert werden. Der Unterschied ist, dass hier keine clock rate eingestellt werden muss. Die Einstellungen können wieder mit dem Befehl \textit{show interfaces FastEthernet 0/0} überprüft werden:
\begin{lstlisting}[captionpos=b, caption=Anzeige der FE 0/0 Einstellungen von R1]
R1#show interfaces FastEthernet 0/0
FastEthernet0/0 is up, line protocol is up
Hardware is MV96340 Ethernet, address is 0025.456d.c780 (bia 0025.456d.c780)
Description: R1 LAN Default Gateway
Internet address is 172.16.0.1/16
MTU 1500 bytes, BW 100000 Kbit/sec, DLY 100 usec,
reliability 255/255, txload 1/255, rxload 1/255
Encapsulation ARPA, loopback not set
Keepalive set (10 sec)
Full-duplex, 100Mb/s, 100BaseTX/FX
ARP type: ARPA, ARP Timeout 04:00:00
Last input 00:00:02, output 00:00:01, output hang never
Last clearing of "show interface" counters never
Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 0
Queueing strategy: fifo
Output queue: 0/40 (size/max)
5 minute input rate 0 bits/sec, 0 packets/sec
5 minute output rate 0 bits/sec, 0 packets/sec
50 packets input, 29595 bytes
Received 50 broadcasts, 0 runts, 0 giants, 0 throttles
0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored
0 watchdog
0 input packets with dribble condition detected
93 packets output, 33415 bytes, 0 underruns
0 output errors, 0 collisions, 1 interface resets
0 babbles, 0 late collision, 0 deferred
0 lost carrier, 0 no carrier
0 output buffer failures, 0 output buffers swapped out
\end{lstlisting}

In der Versuchsbeschreibung werden folgende Fragen gestellt:
\begin{itemize}
	\item \textbf{What did you discover by issuing the show interfaces command?}
	\begin{itemize}
		\item Fast Ethernet 0/0 status is up
		\item Line protocol is up
		\item Internet address is 172.16.0.1/16
		\item Encapsulation ARPA
	\end{itemize}
	\item \textbf{To which OSI layer is the encapsulation referring?} ARPA is the short form of \glqq Advanced Research Projects Agency\grqq, also called Ethernet 2 or DIX Ethernet. Ethernet 2 is a protocol of the  Data Link Layer, or Layer 2.
	\item \textbf{Why did the show interfaces FastEthernet 0/0 command show that the interface is up?} The explanation is the same, like the serial Interfaces. Think of the physical to H1 an the configuration some lines before. 
\end{itemize}

Laut den Einstellungen ist das FE 0/0 Interface von R1 nun korrekt konfiguriert. Im nächsten Schritt wird das FA 0/0 Interface von R2 konfiguriert. Hierfür sind diese Befehle nötig:
\begin{lstlisting}[captionpos=b, caption=Die Befehle zum Konfigurieren des FE 0/0 Interface von R2]
R2(config)#interface FastEthernet 0/0 
R2(config-if)#description R2 LAN Default Gateway 
R2(config-if)#ip address 172.18.0.1 255.255.0.0 
R2(config-if)#no shutdown
R2(config-if)#exit
R2(config)#exit
\end{lstlisting}

Das Ergebnis dieser Befehle wird wieder kontrolliert:
\begin{lstlisting}[captionpos=b, caption=Anzeige der FE 0/0 Einstellungen von R2]
R2#show interfaces
FastEthernet0/0 is up, line protocol is up
Hardware is MV96340 Ethernet, address is 58bc.2738.7c50 (bia 58bc.2738.7c50)
Description: R2 LAN Default Gateway
Internet address is 172.18.0.1/16
MTU 1500 bytes, BW 100000 Kbit/sec, DLY 100 usec,
reliability 255/255, txload 1/255, rxload 1/255
Encapsulation ARPA, loopback not set
Keepalive set (10 sec)
Full-duplex, 100Mb/s, 100BaseTX/FX
ARP type: ARPA, ARP Timeout 04:00:00
Last input 00:00:02, output 00:00:01, output hang never
Last clearing of "show interface" counters never
Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 0
Queueing strategy: fifo
Output queue: 0/40 (size/max)
5 minute input rate 0 bits/sec, 0 packets/sec
5 minute output rate 0 bits/sec, 0 packets/sec
50 packets input, 29595 bytes
Received 50 broadcasts, 0 runts, 0 giants, 0 throttles
0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored
0 watchdog
0 input packets with dribble condition detected
93 packets output, 33415 bytes, 0 underruns
0 output errors, 0 collisions, 1 interface resets
0 babbles, 0 late collision, 0 deferred
0 lost carrier, 0 no carrier
0 output buffer failures, 0 output buffers swapped out
...
R2#
\end{lstlisting}

In der Versuchsbeschreibung werden folgende Fragen gestellt:
\begin{itemize}
	\item \textbf{What did you discover by issuing the show interfaces command?}
	\begin{itemize}
		\item FastEthernet0/0 is up
		\item Line protocol is up 
		\item Internet address is 172.18.0.1/16
		\item Encapsulation ARPA
	\end{itemize}
	\item \textbf{To which OSI layer is the encapsulation referring?} see above
	\item \textbf{Why did the show interfaces FastEthernet 0/0 command show that the interface is up?} see above
\end{itemize}

Um zu testen, ob die Konfiguration wirklich erfolgreich war, pingen wir wieder. Das Pingen auf die FA Interfaces ist am sinnvollsten, wenn es von den Hosts ausgeführt wird.
\begin{lstlisting}[captionpos=b, caption=Ping von R1 an das serielle Interface von R2]
//Keine Ping Datei
R2>\end{lstlisting}

\begin{lstlisting}[captionpos=b, caption=Ping von R2 an das serielle Interface von R1]
//Keine Ping Datei
\end{lstlisting}
\todo{Die Pings finde ich nicht. Evtl. müssen die mit nem Windows Rechner gefaket oder sonstwo abgeschrieben werden und die Frage muss beantwortet werden}

\section{Versuch Teil 2}
Für den zweiten Teil des Versuchs muss der Aufbau geändert. Die Geräte entsprechen grundsätzlich Teil 1 des Versuchs, es wird lediglich nur noch ein Router benötigt. Die beiden Hosts werden mit dem Switch verbunden, der Host H1 hat eine serielle Verbindung zum Switch. 
Vor Beginn des Versuchs wird sichergestellt, dass die Konfigurationen von Router und Switch zurückgesetzt sind. Ist das nicht der Fall können unerwartete Ergebnisse auftreten. \todo{Wie soll ein Roter ohne serielles Kabel zurück gesetzt werden? Evtl. anmerken, dass da doch ein serielles Kabel dran hängt}
\begin{table}[h]
\begin{tabular}{|*{7}{c|}}
\hline
Dev & Hostname & IF & IP-Address & SN Mask & Def GW & Switch P \\
\hline
\hline
S1 & CustomerSwitch & VLAN 1 & 192.168.1.5 & 255.255.255.0 & 192.168.1.1 & N/A \\
\hline
 R1 & CustomerRouter & Fa0/1 & 192.168.1.1 & 255.255.255.0 & N/A & Fa0/5 \\ 
\hline
H1 & H1 & NIC & 192.168.1.2 & 255.255.255.0 & 192.168.1.1 & Fa0/11 \\
\hline
H2 & H2 & NIC & 192.168.1.4 & 255.255.255.0 & 192.168.1.1 & Fa0/18 \\ 
\hline
H3 & H3 & NIC & 192.168.1.6 & 255.255.255.0 & 192.168.1.1 & None \\ 
\hline
\end{tabular}
\caption{Übersicht der Netzwerkadressen}
\label{adresstabelleTeil2}
\end{table}

Die Hosts werden nach der Adresstabelle konfiguriert. Im Router werden die Grundeinstellungen konfiguriert, das Interface Fa0/1 wird nach der Tabelle konfiguriert.

Nachdem die Vorbereitungen abgeschlossen sind, wird der Switch konfiguriert. Die grundsätzliche Konfiguration entspricht der Konfiguration von Routern.
\begin{lstlisting}[captionpos=b, caption=Die Befehle zum Konfigurieren des Switches]
Switch(config)#hostname CustomerSwitch
CustomerSwitch(config)#enable password cisco
CustomerSwitch(config)#enable secret cisco123
CustomerSwitch(config)#line console 0 
CustomerSwitch(config-line)#password cisco123
CustomerSwitch(config-line)#login
CustomerSwitch(config-line)#line vty 0 15CustomerSwitch(config-line)#password cisco123
CustomerSwitch(config-line)#login 
CustomerSwitch(config-line)#end
\end{lstlisting}

Die Auswirkungen dieser Befehle sind im Teil 1 des Versuchs beschrieben. Jetzt folgen die Einstellungen zum Interface. Bei diesen Einstellungen wird ein v-Lan konfiguriert. Ein v-Lan ist ein logisches Teilnetz innerhalb eines Netzwerks. Bei Cisco Geräten ist das VLAN1 auf allen Ports per default konfiguriert. Der Befehl 
\begin{lstlisting}CustomerSwitch(config)#interface vlan 1 
\end{lstlisting} 
konfiguriert dieses Interface. Damit werden alle Ports konfiguriert. \todo{Stimmt das so?}
Dieses Interface wird mit den Befehlen 
\begin{lstlisting}[captionpos=b, caption=Die Befehle zum Konfigurieren des VLAN1 Interfaces]CustomerSwitch(config-if)#ip address 192.168.1.5 255.255.255.0 
CustomerSwitch(config-if)#no shutdown 
CustomerSwitch(config-if)#exitCustomerSwitch(config)#ip default-gateway 192.168.1.1 
CustomerSwitch(config)#end\end{lstlisting}
konfiguriert. Um zu überprüfen, ob die Konfiguration erfolgreich war, bietet sich der Befehl \textit{show running-configuration} an. An der Ausgabe
\begin{lstlisting}[captionpos=b, caption=Die Ausgabe der running configuration nach dem Konfigurieren des VLAN1 Interfaces]CustomSwitch#show run
Building configuration...

Current configuration : 1418 bytes
!
version 12.2
no service pad
service timestamps debug uptime
service timestamps log uptime
no service password-encryption
!
hostname CustomSwitch
!
enable secret 5 $1$BRz6$AhGrgo3ovcz9Px5pGe75p.
enable password cisco
!
no aaa new-model
system mtu routing 1500
ip subnet-zero
!
!
!
!
no file verify auto
spanning-tree mode pvst
spanning-tree extend system-id
!
vlan internal allocation policy ascending
!
interface FastEthernet0/1
!
interface FastEthernet0/2
!
interface FastEthernet0/3
!
interface FastEthernet0/4
!
interface FastEthernet0/5
!
interface FastEthernet0/6
!
interface FastEthernet0/7
!
interface FastEthernet0/8
!
interface FastEthernet0/9
!
interface FastEthernet0/10
!
interface FastEthernet0/11
!
interface FastEthernet0/12
!
interface FastEthernet0/13
!
interface FastEthernet0/14
!
interface FastEthernet0/15
!
interface FastEthernet0/16
!
interface FastEthernet0/17
!
interface FastEthernet0/18
!
interface FastEthernet0/19
!
interface FastEthernet0/20
!
interface FastEthernet0/21
!
interface FastEthernet0/22
!
interface FastEthernet0/23
!
interface FastEthernet0/24
!
interface GigabitEthernet0/1
!
interface GigabitEthernet0/2
!
interface Vlan1
 ip address 192.168.1.5 255.255.255.0
 no ip route-cache
!
ip default-gateway 192.168.1.1
ip http server
!
control-plane
!
!
line con 0
 password cisco123
 login
line vty 0 4
 password cisco123
 login
line vty 5 15
 password cisco123
 login
!
end\end{lstlisting}
sieht man, dass die Konfiguration erfolgreich war. Die IP der Hosts und die IP des Interface befinden sich im gleichen Netzwerk. Um die Konfiguration dauerhaft im NVRAM zu sichern, muss noch die running-config in die startup-config kopiert werden.
\begin{lstlisting}
CustomerSwitch#copy running-config startup-config
\end{lstlisting}